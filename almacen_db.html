<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Base de Datos - Almacén</title>
  <link rel="stylesheet" href="Styles/style.css" />
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1>Base de Datos del Subsistema de Almacén</h1>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2>Imagen de la Tabla de Almacén</h2>
      <div class="mapa-mental">
        <img src="img/almacen3.png" alt="Tabla de Almacén" />
      </div>
    </section>

    <section class="card">
      <h2>Pertinencia de la Arquitectura de la Base de Datos</h2>
      <p>
        La arquitectura de la base de datos del Almacén es pertinente porque organiza la información 
        de materiales y maquinaria de manera estructurada, permitiendo un acceso rápido y seguro a los registros. 
        Esta estructura facilita la integración con otros subsistemas como Finanzas y Proveedores.
      </p>
    </section>

    <section class="card">
      <h2>Propósito</h2>
      <p>
        El propósito de esta base de datos es mantener un control preciso de los materiales y maquinaria 
        disponibles en la constructora, asegurando disponibilidad en los proyectos y reduciendo pérdidas 
        por mala administración.
      </p>
    </section>

    <section class="card">
      <h2>Campos de la Tabla</h2>
      <ul>
        <li><strong>ID_Producto:</strong> Identificador único de cada material o maquinaria.</li>
        <li><strong>Nombre:</strong> Nombre del recurso.</li>
        <li><strong>Tipo:</strong> Clasificación como material o maquinaria.</li>
        <li><strong>Cantidad:</strong> Número de unidades disponibles.</li>
        <li><strong>Estado:</strong> Condición del recurso (nuevo, usado, dañado).</li>
        <li><strong>Ubicacion:</strong> Lugar físico donde se encuentra el recurso.</li>
        <li><strong>Proveedor:</strong> Proveedor del recurso.</li>
      </ul>
    </section>

    <section class="card">
      <h2>Normalización de la Base de Datos</h2>
      <h3>Primera Forma Normal (1NF)</h3>
      <p>Todas las columnas contienen valores atómicos, sin listas o datos repetidos en un mismo campo.</p>

      <h3>Segunda Forma Normal (2NF)</h3>
      <p>Todos los campos dependen de la clave primaria (ID_Producto), evitando dependencias parciales.</p>

      <h3>Tercera Forma Normal (3NF)</h3>
      <p>No existen dependencias transitivas: los datos de proveedores se podrían normalizar en una tabla aparte, evitando redundancia.</p>
    </section>

    <section class="card">
      <h2>Código SQL para Crear la Tabla</h2>
      <pre>
CREATE TABLE Almacen (
    ID_Producto_Maquinaria INT PRIMARY KEY IDENTITY(1,1),
    Nombre NVARCHAR(150) NOT NULL,
    Tipo NVARCHAR(50) NOT NULL, -- 'Material' o 'Maquinaria'
    Cantidad INT NOT NULL DEFAULT 0,
    Estado NVARCHAR(100),
    Ubicacion NVARCHAR(255),
    ID_Proveedor INT,
    CONSTRAINT FK_Almacen_Proveedores FOREIGN KEY (ID_Proveedor) REFERENCES Proveedores(ID_Proveedor) ON DELETE SET NULL
);
GO

ALTER TABLE Almacen
ADD ID_Trabajador INT NULL;
GO

-- Crea la relación (llave foránea) con la tabla Trabajadores
ALTER TABLE Almacen
ADD CONSTRAINT FK_Almacen_Trabajadores
FOREIGN KEY (ID_Trabajador) REFERENCES Trabajadores(ID_Trabajador);
GO

      </pre>
    </section>

    <section class="card">
      <h2>Código SQL para Insertar Registros</h2>
      <pre>
INSERT INTO Almacen (Nombre, Tipo, Cantidad, Estado, Ubicacion, ID_Proveedor, ID_Trabajador)
VALUES
('Cemento Cruz Azul 50kg', 'Material', 200, 'Disponible', 'Bodega A-1', 1, NULL),
('Varilla de Acero 1/2"', 'Material', 500, 'Disponible', 'Patio Exterior', 2, NULL),
('Ladrillo Rojo Recocido', 'Material', 10000, 'Disponible', 'Bodega B-2', 1, NULL),
('Arena de Río por m³', 'Material', 50, 'En uso', 'Proyecto Residencial Zafiro', NULL, NULL),
('Retroexcavadora Caterpillar 420F2', 'Maquinaria', 1, 'En mantenimiento', 'Taller Central', 3, NULL),
('Revolvedora de Concreto Cipsa', 'Maquinaria', 3, 'Disponible', 'Bodega de Maquinaria', NULL, NULL),
('Compactadora tipo Bailarina', 'Maquinaria', 2, 'En uso', 'Proyecto Plaza Sol', 4, NULL),
('Juego de Andamios Metálicos', 'Maquinaria', 20, 'Disponible', 'Bodega C-4', NULL, 7); -- Registro asignado al Almacenista

GO
      </pre>
    </section>

<section class="card">
      <h2>Imagen de la Tabla de Almacén</h2>
      <div class="mapa-mental">
        <img src="img/registro_alm2.png" alt="Tabla de Almacén" />
      </div>
    </section>

    <p><a href="almacen.html">⬅ Regresar al subsistema de Almacén</a></p>
  </main>
</body>
</html>
